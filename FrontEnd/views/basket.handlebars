<div>
  <center>
    <h3>Your Basket</h3>
  </center>
</div>
<div>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Product</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Total</th>
      </tr>
    </thead>
    {{!-- <tbody>
      {{#each basket}}
      <tr>
        <td>{{name}}</td>
        <td>{{price}}</td>
        <td>{{quantity}}</td>
        <td>{{total}}</td>
      </tr>
      {{/each}}
    </tbody> --}}
  </table>
</div>
<div>
  <center>
    <h3>Total:</h3>
  </center>
</div>
<div>
  <center><a href="/basket/checkout" class="btn btn-primary">Checkout</a></center>

</div>

<script>
  window.onload = function () {
    const productIds = getLocalStorageItems();
    getProducts(productIds);
  }; 
  
  function getLocalStorageItems() {
    productIds = JSON.parse(localStorage.getItem("basket")); 
    return productIds.map(item => parseInt(item));
  } 
  
  async function getProducts(productIds) {
    const data = {
      productIds: productIds
    } 
    const response = await fetch(`http://localhost:3010/api/basket`, {
        method: "POST", 
        body: JSON.stringify(data), 
        headers: { 'content-type': 'application/json', }
      })
    const products = await response.json() console.log(products)
  }

</script>